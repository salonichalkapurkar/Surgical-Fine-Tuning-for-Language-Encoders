import numpy as np
import matplotlib.pyplot as plt

def plot_average_with_error_bars(list_of_lists, attr, dataset_name):
    # Stack the list of lists using numpy
    stacked_array = np.stack(list_of_lists, axis=0)
    
    # Compute the mean and standard deviation for each column
    mean_values = np.mean(stacked_array, axis=0)
    std_values = np.std(stacked_array, axis=0)
    
    # Plot the mean values with error bars
    plt.errorbar(np.arange(mean_values.shape[0]), mean_values, yerr=std_values, fmt='-o')
    plt.ylim(0, 1)
    plt.xlabel('Layers')
    plt.ylabel('Average Density')
    plt.title(f"Attribute: {attr}, Dataset: {dataset_name}")
    plt.savefig("./results/figs/average_density_sentiment.png", dpi=500, bbox_inches='tight')
    plt.show()

# model: bert-base-multilingual-cased
# sst2 
res = [[0.805078125, 0.7537760416666667, 0.6885416666666666, 0.5329427083333332, 0.6708333333333334, 0.6774739583333332, 0.68359375, 0.6277343750000001, 0.6432291666666667, 0.6446614583333333, 0.6501302083333333, 0.7000000000000001],

[0.7901041666666666, 0.7335069444444443, 0.666579861111111, 0.4967881944444444, 0.6471354166666666, 0.6567708333333333, 0.6605902777777778, 0.6008680555555556, 0.6196180555555556, 0.6208333333333333, 0.6236979166666666, 0.6846354166666666],

[0.7883463541666668, 0.7321614583333332, 0.6649088541666667, 0.4931640625, 0.6446614583333333, 0.6551432291666667, 0.6577473958333333, 0.5981770833333333, 0.6182291666666667, 0.6199869791666667, 0.6249348958333333, 0.6848958333333334],

[0.773125, 0.7160416666666668, 0.6477083333333334, 0.46932291666666676, 0.6278645833333333, 0.6386979166666666, 0.6404166666666667, 0.57921875, 0.5983854166666667, 0.5986458333333333, 0.6027604166666666, 0.6669791666666667],

[0.7725260416666666, 0.714626736111111, 0.6480034722222222, 0.46970486111111115, 0.6268229166666667, 0.6378472222222222, 0.6396267361111111, 0.578342013888889, 0.5983506944444444, 0.5971354166666667, 0.6008246527777777, 0.6654513888888889],

[0.7714285714285714, 0.7133928571428573, 0.6476562499999999, 0.46979166666666666, 0.6271949404761905, 0.6386904761904763, 0.6400297619047618, 0.5779761904761904, 0.5976190476190476, 0.5969494047619047, 0.6003348214285714, 0.6652901785714286]]

plot_average_with_error_bars(res, "sentiment", "SST2")